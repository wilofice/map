<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Modular Horizontal Mind Map - SQLite Enhanced</title>
    <!-- Prism.js for syntax highlighting -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-javascript.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-typescript.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-java.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-cpp.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-csharp.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-css.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-markup.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-json.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-yaml.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-markdown.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-bash.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-sql.min.js"></script>
    <!-- CSS Module Imports -->
    <link rel="stylesheet" href="css/main-styles.css">
    <link rel="stylesheet" href="css/animations.css">
    <link rel="stylesheet" href="css/progress-styles.css">
</head>
<body>
    <div class="sidebar">
        <div class="sidebar-header">
            <h2>ğŸ“ Database Projects</h2>
            <button class="sidebar-toggle" id="sidebarToggle" title="Toggle Sidebar">â€¹</button>
        </div>
        
        <div class="sidebar-content">
            <!-- Project Selection -->
            <div class="working-root-section" id="projectSection">
                <div class="working-root-display">
                    <span class="folder-icon">ğŸ’¾</span>
                    <span class="working-root-path" id="currentProjectName">No project loaded</span>
                </div>
                <button class="folder-btn" id="switchProjectBtn" title="Switch to another project">ğŸ”„ Switch Project</button>
            </div>
            
            <!-- Quick Project Actions -->
            <div class="folder-navigation">
                <button class="folder-btn" id="newProjectBtn">â• New Project</button>
                <button class="folder-btn" id="importJsonBtn">ğŸ“ Import JSON</button>
                <button class="folder-btn" id="searchProjectsBtn">ğŸ” Search Projects</button>
            </div>

            <!-- Hidden file input for JSON import -->
            <input type="file" id="jsonFileInput" accept=".json" style="display: none;">
            
            <!-- Database Stats -->
            <div class="folder-section">
                <h3>ğŸ“Š Database Stats</h3>
                <div class="db-stats" id="dbStats">
                    <div class="stat-item">
                        <span class="stat-label">Projects:</span>
                        <span class="stat-value" id="projectCount">0</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Nodes:</span>
                        <span class="stat-value" id="nodeCount">0</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Size:</span>
                        <span class="stat-value" id="dbSize">0 KB</span>
                    </div>
                </div>
            </div>
            
            <!-- Project List -->
            <div class="folder-section" id="projectListSection" style="display: none;">
                <h3>ğŸ“‹ Recent Projects</h3>
                <ul class="file-list" id="projectList">
                    <li class="loading">Loading projects...</li>
                </ul>
            </div>
        </div>
    </div>

    <div class="main-content">
        <div class="container">
            <h1>ğŸ§  Modular Horizontal Mind Map - SQLite Enhanced</h1>
            
            <div class="controls" id="controls" style="display: none;">
                <button class="btn btn-success" id="saveBtn">ğŸ’¾ <span class="btn-text">Save All Changes</span></button>
                <button class="btn btn-secondary" id="toggleCommentsBtn">ğŸ’¬ <span class="btn-text">Show Comments</span></button>
                <button class="btn btn-secondary" id="toggleDatesBtn">ğŸ“… <span class="btn-text">Show Dates</span></button>
                <button class="btn btn-secondary" id="toggleAddBtn">â• <span class="btn-text">Hide Add Buttons</span></button>
                <button class="btn btn-secondary" id="toggleAllBtn">ğŸ“‚ <span class="btn-text">Toggle All</span></button>
                <button class="btn" id="toggleFlashBtn">âœ¨ <span class="btn-text">Start Flash</span></button>
                <button class="btn" id="toggleAnimateLinesBtn">ã€°ï¸ <span class="btn-text">Animate Lines</span></button>
                <button class="btn btn-info" id="toggleViewBtn">ğŸ“‹ <span class="btn-text">Board View</span></button>
                <button class="btn" id="cleanupBtn" style="background: #f59e0b; color: white;">ğŸ”§ <span class="btn-text">Clean up IDs</span></button>
                <button class="btn" id="exportBtn" style="background: #17a2b8; color: white;">ğŸ“¤ <span class="btn-text">Export JSON</span></button>
            </div>

            <!-- Progress Bar -->
            <div class="progress-container" id="progressContainer" style="display: none;">
                <div class="progress-header">
                    <div class="progress-title">
                        ï¿½ Overall Progress
                    </div>
                    <div class="progress-percentage" id="progressPercentage">0%</div>
                </div>
                <div class="progress-bar-wrapper">
                    <div class="progress-bar" id="progressBar" style="width: 0%"></div>
                </div>
                <div class="progress-stats">
                    <div class="progress-stat">
                        <span class="progress-stat-icon">âœ…</span>
                        <span>Completed: <span class="progress-stat-value" id="completedCount">0</span></span>
                    </div>
                    <div class="progress-stat">
                        <span class="progress-stat-icon">ğŸŸ¡</span>
                        <span>In Progress: <span class="progress-stat-value" id="inProgressCount">0</span></span>
                    </div>
                    <div class="progress-stat">
                        <span class="progress-stat-icon">ğŸ”²</span>
                        <span>Pending: <span class="progress-stat-value" id="pendingCount">0</span></span>
                    </div>
                    <div class="progress-stat">
                        <span class="progress-stat-icon">ğŸ“</span>
                        <span>Total: <span class="progress-stat-value" id="totalCount">0</span></span>
                    </div>
                </div>
            </div>

            <div class="mind-map-container" id="mindMapContainer">
                <div class="empty-state">
                    <h3>Welcome to SQLite Enhanced Mind Map</h3>
                    <p>Select a project from the sidebar to begin, or create a new project.</p>
                    <div style="margin-top: 20px;">
                        <button class="btn btn-primary" onclick="showProjectSelector()">ï¿½ Choose Project</button>
                        <button class="btn btn-success" onclick="createNewProject()">â• New Project</button>
                    </div>
                </div>
            </div>

            <!-- Kanban Board View -->
            <div class="board-container" id="boardContainer" style="display: none;">
                <div class="board-header">
                    <h3>ï¿½ Project Board - <span id="boardTitle">Project</span></h3>
                </div>
                <div class="board-columns">
                    <div class="board-column" id="todoColumn">
                        <div class="column-header">
                            <h4>ï¿½ To Do</h4>
                            <span class="task-count" id="todoCount">0</span>
                        </div>
                        <div class="column-content" id="todoCards">
                            <!-- Cards will be dynamically populated -->
                        </div>
                    </div>
                    
                    <div class="board-column" id="inProgressColumn">
                        <div class="column-header">
                            <h4>âš¡ In Progress</h4>
                            <span class="task-count" id="inProgressBoardCount">0</span>
                        </div>
                        <div class="column-content" id="inProgressCards">
                            <!-- Cards will be dynamically populated -->
                        </div>
                    </div>
                    
                    <div class="board-column" id="doneColumn">
                        <div class="column-header">
                            <h4>âœ… Done</h4>
                            <span class="task-count" id="doneCount">0</span>
                        </div>
                        <div class="column-content" id="doneCards">
                            <!-- Cards will be dynamically populated -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="save-indicator" id="saveIndicator">âœ“ Saved</div>

    <div class="context-menu" id="contextMenu">
        <div class="context-menu-item" data-priority="high">ğŸ”´ High Priority</div>
        <div class="context-menu-item" data-priority="medium">ğŸŸ¡ Medium Priority</div>
        <div class="context-menu-item" data-priority="low">ğŸŸ¢ Low Priority</div>
        <div class="context-menu-item" onclick="deleteNode(currentContextNode)">ğŸ—‘ï¸ Delete Node</div>
    </div>

    <!-- Shared JavaScript Modules -->
    <script src="js/mind-map-core.js"></script>
    <script src="js/mind-map-renderer.js"></script>
    <script src="js/mind-map-database.js"></script>
    <script src="js/mind-map-ui.js"></script>
    <script src="js/mind-map-init.js"></script>

</body>
</html>
