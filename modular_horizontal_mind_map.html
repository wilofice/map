<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Modular Horizontal Mind Map</title>
    <!-- Prism.js for syntax highlighting -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-javascript.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-typescript.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-java.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-cpp.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-csharp.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-css.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-markup.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-json.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-yaml.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-markdown.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-bash.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-sql.min.js"></script>
    <!-- CSS Module Imports -->
    <link rel="stylesheet" href="css/main-styles.css">
    <link rel="stylesheet" href="css/animations.css">
    <link rel="stylesheet" href="css/progress-styles.css">
</head>
<body>
    <div class="sidebar">
        <div class="sidebar-header">
            <h2>📁 Project Files</h2>
            <button class="sidebar-toggle" id="sidebarToggle" title="Toggle Sidebar">‹</button>
        </div>
        
        <div class="sidebar-content">
            <!-- Working Root Directory -->
            <div class="working-root-section">
                <div class="working-root-display">
                    <span class="folder-icon">🏠</span>
                    <span class="working-root-path" id="workingRootPath">Loading...</span>
                </div>
                <button class="folder-btn" id="changeRootBtn" title="Change working root directory">📂 Change Root</button>
            </div>
            
            <!-- Folder Navigation -->
            <div class="folder-navigation">
                <div class="current-folder" id="currentFolder">
                    <span class="folder-icon">📂</span>
                    <span class="folder-path">.</span>
                </div>
                <div class="folder-controls">
                    <button class="folder-btn" id="parentFolderBtn" title="Go to parent folder">↑ Parent</button>
                </div>
            </div>
            
            <!-- Folder List -->
            <div class="folder-section">
                <h3>📂 Folders</h3>
                <ul class="folder-list" id="folderList">
                    <li class="loading">Loading folders...</li>
                </ul>
            </div>
            
            <button class="new-file-btn" id="newFileBtn">+ New Mind Map</button>
            <ul class="file-list" id="fileList">
                <li class="loading">Loading files...</li>
            </ul>
        </div>
    </div>

    <div class="main-content">
        <div class="container">
            <h1>🧠 Modular Horizontal Mind Map</h1>
            
            <div class="controls" id="controls" style="display: none;">
                <button class="btn btn-success" id="saveBtn">💾 <span class="btn-text">Save All Changes</span></button>
                <button class="btn btn-secondary" id="toggleCommentsBtn">💬 <span class="btn-text">Show Comments</span></button>
                <button class="btn btn-secondary" id="toggleDatesBtn">📅 <span class="btn-text">Show Dates</span></button>
                <button class="btn btn-secondary" id="toggleAddBtn">➕ <span class="btn-text">Hide Add Buttons</span></button>
                <button class="btn btn-secondary" id="toggleAllBtn">📂 <span class="btn-text">Toggle All</span></button>
                <button class="btn" id="toggleFlashBtn">✨ <span class="btn-text">Start Flash</span></button>
                <button class="btn" id="toggleAnimateLinesBtn">〰️ <span class="btn-text">Animate Lines</span></button>
                <button class="btn btn-info" id="toggleViewBtn">📋 <span class="btn-text">Board View</span></button>
                <button class="btn" id="cleanupBtn" style="background: #f59e0b; color: white;">🔧 <span class="btn-text">Clean up IDs</span></button>
            </div>

            <!-- Progress Bar -->
            <div class="progress-container" id="progressContainer" style="display: none;">
                <div class="progress-header">
                    <div class="progress-title">
                        📊 Overall Progress
                    </div>
                    <div class="progress-percentage" id="progressPercentage">0%</div>
                </div>
                <div class="progress-bar-wrapper">
                    <div class="progress-bar" id="progressBar" style="width: 0%"></div>
                </div>
                <div class="progress-stats">
                    <div class="progress-stat">
                        <span class="progress-stat-icon">✅</span>
                        <span>Completed: <span class="progress-stat-value" id="completedCount">0</span></span>
                    </div>
                    <div class="progress-stat">
                        <span class="progress-stat-icon">🟡</span>
                        <span>In Progress: <span class="progress-stat-value" id="inProgressCount">0</span></span>
                    </div>
                    <div class="progress-stat">
                        <span class="progress-stat-icon">🔲</span>
                        <span>Pending: <span class="progress-stat-value" id="pendingCount">0</span></span>
                    </div>
                    <div class="progress-stat">
                        <span class="progress-stat-icon">📝</span>
                        <span>Total: <span class="progress-stat-value" id="totalCount">0</span></span>
                    </div>
                </div>
            </div>

            <div class="mind-map-container" id="mindMapContainer">
                <div class="empty-state">
                    <h3>Welcome to Modular Horizontal Mind Map</h3>
                    <p>Select a file from the sidebar to begin, or create a new mind map.</p>
                </div>
            </div>

            <!-- Kanban Board View -->
            <div class="board-container" id="boardContainer" style="display: none;">
                <div class="board-header">
                    <h3>📋 Project Board - <span id="boardTitle">Project</span></h3>
                </div>
                <div class="board-columns">
                    <div class="board-column" id="todoColumn">
                        <div class="column-header">
                            <h4>📝 To Do</h4>
                            <span class="task-count" id="todoCount">0</span>
                        </div>
                        <div class="column-content" id="todoCards">
                            <!-- Cards will be dynamically populated -->
                        </div>
                    </div>
                    
                    <div class="board-column" id="inProgressColumn">
                        <div class="column-header">
                            <h4>⚡ In Progress</h4>
                            <span class="task-count" id="inProgressCount">0</span>
                        </div>
                        <div class="column-content" id="inProgressCards">
                            <!-- Cards will be dynamically populated -->
                        </div>
                    </div>
                    
                    <div class="board-column" id="doneColumn">
                        <div class="column-header">
                            <h4>✅ Done</h4>
                            <span class="task-count" id="doneCount">0</span>
                        </div>
                        <div class="column-content" id="doneCards">
                            <!-- Cards will be dynamically populated -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="save-indicator" id="saveIndicator">✓ Saved</div>

    <div class="context-menu" id="contextMenu">
        <div class="context-menu-item" data-priority="high">🔴 High Priority</div>
        <div class="context-menu-item" data-priority="medium">🟡 Medium Priority</div>
        <div class="context-menu-item" data-priority="low">🟢 Low Priority</div>
    </div>

    <!-- Shared JavaScript Modules -->
    <script src="js/mind-map-core.js"></script>
    <script src="js/mind-map-renderer.js"></script>
    <script src="js/mind-map-files.js"></script>
    <script src="js/mind-map-ui.js"></script>
    <script src="js/mind-map-init.js"></script>

</body>
</html>
